{"remainingRequest":"/Users/luan/.nvm/versions/node/v9.10.0/lib/node_modules/docz/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"/Users/luan/.nvm/versions/node/v9.10.0/lib/node_modules/docz/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[],\"cacheDirectory\":true,\"babelrc\":false}!/Users/luan/Documents/dev/nuvem/nimbus/packages/@nimbus/i18n/lib/i18n.js","dependencies":[{"path":"/Users/luan/Documents/dev/nuvem/nimbus/packages/@nimbus/i18n/lib/i18n.js","mtime":1539792241928},{"path":"/Users/luan/.nvm/versions/node/v9.10.0/lib/node_modules/docz/node_modules/cache-loader/dist/cjs.js","mtime":1539762712172},{"path":"/Users/luan/.nvm/versions/node/v9.10.0/lib/node_modules/docz/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["'use strict';\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport flatten from 'flat';\nimport compile from 'string-template/compile';\nvar _countProperties = ['count', 'number', 'size', '0', 'length', 'items'];\nvar _languageSet = {};\nvar _defaultLang = 'pt-BR';\nvar _currentLang = 'pt-BR';\n_languageSet[_defaultLang] = new Map();\n\nfunction countProperty(data) {\n  return _countProperties.filter(function (x) {\n    return x in data;\n  })[0];\n}\n\nfunction i18n(key) {\n  for (var _len = arguments.length, data = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    data[_key - 1] = arguments[_key];\n  }\n\n  if (key instanceof Array) {\n    key = key[0];\n  }\n\n  if (_typeof(data[0]) == 'object' || data[0] instanceof Array) {\n    data = data[0];\n  }\n\n  var langMap = _currentLang in _languageSet ? _languageSet[_currentLang] : _languageSet[_defaultLang];\n\n  if (langMap.has(key)) {\n    var fn = langMap.get(key);\n\n    if (fn instanceof Array) {\n      var property = countProperty(data);\n      var count = +data[property] || 0;\n      var index = Math.min(count, fn.length - 1) || 0;\n      return fn[index](data);\n    }\n\n    return fn(data);\n  }\n\n  return key;\n}\n\ni18n.reset = function () {\n  var keys = Object.keys(_languageSet);\n  _currentLang = _defaultLang;\n\n  for (var _i = 0; _i < keys.length; _i++) {\n    var key = keys[_i];\n\n    _languageSet[key].clear();\n\n    delete _languageSet[key];\n  }\n};\n\ni18n.lang = function (lang) {\n  _currentLang = lang;\n};\n\ni18n.register = function (lang, keys) {\n  if (lang in _languageSet === false) {\n    _languageSet[lang] = new Map();\n  }\n\n  var langMap = _languageSet[lang];\n  keys = flatten(keys, {\n    safe: true\n  });\n  Object.entries(keys).forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        value = _ref2[1];\n\n    if (value instanceof Array) {\n      var translates = value.map(function (v) {\n        return compile(v, true);\n      });\n      value = translates;\n      langMap.set(key, value);\n      return;\n    }\n\n    langMap.set(key, compile(value, true));\n  });\n};\n\nexport default i18n;",{"version":3,"sources":["/Users/luan/Documents/dev/nuvem/nimbus/packages/@nimbus/i18n/lib/i18n.js"],"names":["flatten","compile","_countProperties","_languageSet","_defaultLang","_currentLang","Map","countProperty","data","filter","x","i18n","key","Array","langMap","has","fn","get","property","count","index","Math","min","length","reset","keys","Object","clear","lang","register","safe","entries","forEach","value","translates","map","v","set"],"mappings":"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","sourcesContent":["'use strict';\nimport flatten from 'flat';\nimport compile from 'string-template/compile';\n\nconst _countProperties = [ 'count', 'number', 'size', '0', 'length', 'items' ];\nconst _languageSet = {};\nconst _defaultLang = 'pt-BR';\nlet _currentLang = 'pt-BR';\n\n_languageSet[_defaultLang] = new Map();\n\nfunction countProperty(data) {\n\treturn _countProperties.filter((x) => x in data)[0];\n}\n\nfunction i18n(key, ...data) {\n\tif (key instanceof Array) {\n\t\tkey = key[0];\n\t}\n\n\tif (typeof data[0] == 'object' || data[0] instanceof Array) {\n\t\tdata = data[0];\n\t}\n\tconst langMap = _currentLang in _languageSet ? _languageSet[_currentLang] : _languageSet[_defaultLang];\n\n\tif (langMap.has(key)) {\n\t\tvar fn = langMap.get(key);\n\n\t\tif (fn instanceof Array) {\n\t\t\tconst property = countProperty(data);\n\t\t\tconst count = +data[property] || 0;\n\t\t\tconst index = Math.min(count, fn.length - 1) || 0;\n\n\t\t\treturn fn[index](data);\n\t\t}\n\n\t\treturn fn(data);\n\t}\n\n\treturn key;\n}\n\ni18n.reset = function() {\n\tconst keys = Object.keys(_languageSet);\n\t_currentLang = _defaultLang;\n\tfor (var key of keys) {\n\t\t_languageSet[key].clear();\n\t\tdelete _languageSet[key];\n\t}\n};\n\ni18n.lang = function(lang) {\n\t_currentLang = lang;\n};\n\ni18n.register = function(lang, keys) {\n\tif (lang in _languageSet === false) {\n\t\t_languageSet[lang] = new Map();\n\t}\n\n\tconst langMap = _languageSet[lang];\n\n\tkeys = flatten(keys, { safe: true });\n\n\tObject.entries(keys).forEach(([ key, value ]) => {\n\t\tif (value instanceof Array) {\n\t\t\tconst translates = value.map((v) => compile(v, true));\n\t\t\tvalue = translates;\n\t\t\tlangMap.set(key, value);\n\n\t\t\treturn;\n\t\t}\n\t\tlangMap.set(key, compile(value, true));\n\t});\n};\n\nexport default i18n;\n"]}]}